# Playwright.Net - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –¥–≤–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright .NET:

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Before (–ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
```
Playwright.Example/Before/
‚îú‚îÄ‚îÄ POM/
‚îÇ   ‚îú‚îÄ‚îÄ Controls/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ControlBase.cs      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Logo.cs            # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª –ª–æ–≥–æ—Ç–∏–ø–∞
‚îÇ   ‚îî‚îÄ‚îÄ Pages/
‚îÇ       ‚îú‚îÄ‚îÄ KonturPage.cs      # Page Object –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îú‚îÄ‚îÄ PageBase.cs        # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ       ‚îî‚îÄ‚îÄ Urls.cs           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã URL
‚îî‚îÄ‚îÄ Tests/
    ‚îú‚îÄ‚îÄ KonturPageShould.cs   # –¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ö–æ–Ω—Ç—É—Ä
    ‚îî‚îÄ‚îÄ TestBase.cs          # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Ç–µ—Å—Ç–æ–≤
```

### After (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å DI, —Ñ–∞–±—Ä–∏–∫–∞–º–∏ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π)
```
Playwright.Example/After/
‚îú‚îÄ‚îÄ PlaywrightCore/           # üîß –°–ª–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Playwright
‚îÇ   ‚îú‚îÄ‚îÄ BrowserContextGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ ChromiumGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ IBrowserContextGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ IBrowserGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ IPlaywrightGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ IPlaywrightPageGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ PlaywrightPageGetter.cs
‚îÇ   ‚îú‚îÄ‚îÄ PlaywrightSingleton.cs
‚îÇ   ‚îî‚îÄ‚îÄ ServiceCollectionExtensions.cs  # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ DI
‚îú‚îÄ‚îÄ POM/
‚îÇ   ‚îú‚îÄ‚îÄ Controls/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ControlBase.cs      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Logo.cs            # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª –ª–æ–≥–æ—Ç–∏–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ Factories/             # üè≠ –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DependencyFactory.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IControlFactory.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IDependenciesFactory.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IPageFactory.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PageFactory.cs      # –§–∞–±—Ä–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SimpleControlFactory.cs  # –§–∞–±—Ä–∏–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ Pages/
‚îÇ       ‚îú‚îÄ‚îÄ KonturPage.cs      # Page Object –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îú‚îÄ‚îÄ PageBase.cs        # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ       ‚îî‚îÄ‚îÄ Urls.cs           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã URL
‚îî‚îÄ‚îÄ Tests/
    ‚îú‚îÄ‚îÄ KonturPageShould.cs   # –¢–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ö–æ–Ω—Ç—É—Ä
    ‚îî‚îÄ‚îÄ TestBase.cs          # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Ç–µ—Å—Ç–æ–≤ —Å DI
```

## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### Before (–ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥)
```csharp
// TestBase.cs - –ø—Ä—è–º–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
protected async Task<IPage> GetPageAsync(string url)
{
    var pw = await PlaywrightTask;
    var browser = await pw.Chromium.LaunchAsync(new BrowserTypeLaunchOptions(){Headless = false});
    var browserContext = await browser.NewContextAsync();
    var page = await browserContext.NewPageAsync();
    await page.GotoAsync(url);
    return page;
}

// KonturPageShould.cs - –ø—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
[Test]
public async Task ContainLogo()
{
    var page = await GetPageAsync(Urls.Main);
    var konturPage = new KonturPage(page);  // üëà –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
    await konturPage.Logo.Expect().ToHaveAttributeAsync("alt", "Kontur");
}
```

### After (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å DI –∏ —Ñ–∞–±—Ä–∏–∫–∞–º–∏)
```csharp
// TestBase.cs - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
private readonly IServiceProvider _serviceProvider
    = new ServiceCollection().AddPlaywright().BuildServiceProvider();

protected async Task<TPage> GoToAsync<TPage>() where TPage : PageBase
{
    var pwPageGetter = ServiceProvider.GetRequiredService<IPlaywrightPageGetter>();
    var pageFactory = ServiceProvider.GetRequiredService<IPageFactory>();
    var pwPage = await pwPageGetter.GetAsync();
    var pageObject = pageFactory.Create<TPage>(pwPage);  // üëà –ß–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É
    await pwPage.GotoAsync(pageObject.Url);
    return pageObject;
}

// KonturPageShould.cs - –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
[Test]
public async Task ContainLogo()
{
    var konturPage = await GoToAsync<KonturPage>();  // üëà –ß–µ—Ä–µ–∑ DI
    await konturPage.Logo.Expect().ToHaveAttributeAsync("alt", "Kontur");
}
```

## ‚úÖ –ü–æ—á–µ–º—É –≤—Ç–æ—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π**
- **Before**: –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
- **After**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å (—Ñ–∞–±—Ä–∏–∫–∏, DI, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–º)

### 2. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
- **Before**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- **After**: –§–∞–±—Ä–∏–∫–∏ –∏ DI –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º**
- **Before**: –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- **After**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ scopes DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 4. **–ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- **Before**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞
- **After**: –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏, —Ä–µ–∂–∏–º–∞–º–∏ —á–µ—Ä–µ–∑ DI

### 5. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
- **Before**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–∞—Ö
- **After**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Ñ–∞–±—Ä–∏–∫–∞—Ö –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö DI

### 6. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**
- **Before**: –°–ª–æ–∂–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **After**: –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## üìö –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–∑ –ø–∞–ø–∫–∏ `After`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –õ—É—á—à—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞
- –í—ã—Å–æ–∫—É—é —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ—Å—Ç—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è
- –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑ –ø–∞–ø–∫–∏ `Before` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è:
- –ú–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ë—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤ Playwright